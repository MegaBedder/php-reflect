#!/usr/bin/env php
<?php
// CLI version
//putenv("REFLECT=/path/to/reflect.json");

$phpParserDir = dirname(__DIR__) . DIRECTORY_SEPARATOR . 'vendor/PHP-Parser/lib';

require $phpParserDir . '/PhpParser/Autoloader.php';
PhpParser\Autoloader::register();

if (\Phar::running()) {
    require_once 'phar://phpreflect.phar/vendor/Symfony/Component/ClassLoader/UniversalClassLoader.php';
    require_once 'phar://phpreflect.phar/vendor/PHPUnit/PHP_Timer/PHP/Timer.php';
} else {
    require_once 'Symfony/Component/ClassLoader/UniversalClassLoader.php';
    require_once 'PHP/Timer.php';
}

use Symfony\Component\ClassLoader\UniversalClassLoader;

$loader = new UniversalClassLoader();
$loader->registerNamespaces(array(
    'Bartlett' => dirname(__DIR__) . DIRECTORY_SEPARATOR . 'src',
    'Symfony'  => dirname(__DIR__) . DIRECTORY_SEPARATOR . 'vendor',
));
$loader->register();

if (PHP_SAPI !== 'cli') {
    return;
}

use Bartlett\Reflect\ConsoleApplication as Application;

$application = new Application();
$application->run();
