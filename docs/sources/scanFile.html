<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.5" />
<title>PHP_Reflect Basic usage</title>
<link rel="stylesheet" href="../styles/flask.css" type="text/css" />
<link rel="stylesheet" href="../styles/pygments.css" type="text/css" />
<script type="text/javascript" src="../js/asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>PHP_Reflect Basic usage</h1>
<span id="author">Laurent Laville</span><br />
<span id="email"><tt>&lt;<a href="mailto:pear@laurent-laville.org">pear@laurent-laville.org</a>&gt;</tt></span><br />
<span id="revnumber">version 1.0.0,</span>
<span id="revdate">July 1, 2011</span>
</div>
<div id="content">
<div class="sect1">
<h2 id="_source_code">Source Code</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="sd">/**</span>
<span class="sd"> * Example that scan a simple file and return list of classes used</span>
<span class="sd"> *</span>
<span class="sd"> * PHP version 5</span>
<span class="sd"> *</span>
<span class="sd"> * @category PHP</span>
<span class="sd"> * @package  PHP_Reflect</span>
<span class="sd"> * @author   Laurent Laville &lt;pear@laurent-laville.org&gt;</span>
<span class="sd"> * @license  http://www.opensource.org/licenses/bsd-license.php  BSD</span>
<span class="sd"> * @version  SVN: $Id$</span>
<span class="sd"> * @link     http://php5.laurent-laville.org/reflect/</span>
<span class="sd"> * @since    File available since Release 1.0.0</span>
<span class="sd"> */</span>

<span class="k">require_once</span> <span class="s1">&#39;Bartlett/PHP/Reflect/Autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$source</span> <span class="o">=</span> <span class="s1">&#39;/path/to/PEAR-1.9.2/PEAR.php&#39;</span><span class="p">;</span>

<span class="nv">$reflect</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PHP_Reflect</span><span class="p">();</span>
<span class="nv">$reflect</span><span class="o">-&gt;</span><span class="na">scan</span><span class="p">(</span><span class="nv">$source</span><span class="p">);</span>

<span class="nv">$classes</span> <span class="o">=</span> <span class="nv">$reflect</span><span class="o">-&gt;</span><span class="na">getClasses</span><span class="p">();</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nb">array_keys</span><span class="p">(</span><span class="nv">$classes</span><span class="p">));</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div></div></div>
<div class="paragraph"><p>Scan <tt>PEAR.php</tt> script and returns only class names defined.
All details (docblock, startLine, endLine, keywords, parent, metods, interfaces, &#8230;)
are available in <tt>$classes</tt> variable.</p></div>
<div class="paragraph"><p><tt>print_r</tt> should display array below:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="x">&lt;php</span>
<span class="x">Array</span>
<span class="x">(</span>
<span class="x">    [0] =&gt; PEAR</span>
<span class="x">    [1] =&gt; PEAR5</span>
<span class="x">    [2] =&gt; PEAR_Error</span>
<span class="x">)</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="paragraph"><p>You can also retrieve informations through the array access interface.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="nv">$reflect</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PHP_Reflect</span><span class="p">();</span>
    <span class="nv">$reflect</span><span class="o">-&gt;</span><span class="na">scan</span><span class="p">(</span><span class="nv">$source</span><span class="p">);</span>

    <span class="nv">$classes</span> <span class="o">=</span> <span class="nv">$reflect</span><span class="p">[</span><span class="s1">&#39;classes&#39;</span><span class="p">];</span>
</pre></div></div></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_full_results">Full results</h2>
<div class="sectionbody">
<div class="paragraph"><p>If you want to have all results on a specific class returned, always with this example.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$classes</span><span class="p">[</span><span class="s1">&#39;PEAR_Error&#39;</span><span class="p">]);</span>
</pre></div></div></div>
<div class="paragraph"><p>Should return</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Array
(
    [startLine] =&gt; 796
    [endLine] =&gt; 1055
    [file] =&gt; C:\UwAmp\apache\php_5.2.13\tmp\PEAR-1.9.2\PEAR.php
    [docblock] =&gt; /**
 * Standard PEAR error class for PHP 4
 *
 * This class is supserseded by {@link PEAR_Exception} in PHP 5
 *
 * @category   pear
 * @package    PEAR
 * @author     Stig Bakken &lt;ssb@php.net&gt;
 * @author     Tomas V.V. Cox &lt;cox@idecnet.com&gt;
 * @author     Gregory Beaver &lt;cellog@php.net&gt;
 * @copyright  1997-2006 The PHP Group
 * @license    http://opensource.org/licenses/bsd-license.php New BSD License
 * @version    Release: 1.9.2
 * @link       http://pear.php.net/manual/en/core.pear.pear-error.php
 * @see        PEAR::raiseError(), PEAR::throwError()
 * @since      Class available since PHP 4.0.2
 */
    [keywords] =&gt;
    [parent] =&gt;
    [interfaces] =&gt;
    [package] =&gt; Array
        (
            [namespace] =&gt;
            [fullPackage] =&gt; PEAR
            [category] =&gt; pear
            [package] =&gt; PEAR
            [subpackage] =&gt;
        )

    [methods] =&gt; Array
        (
            [PEAR_Error] =&gt; Array
                (
                    [startLine] =&gt; 826
                    [endLine] =&gt; 897

... more ....

            [toString] =&gt; Array
                (
                    [startLine] =&gt; 1015
                    [endLine] =&gt; 1054
                    [file] =&gt; C:\UwAmp\apache\php_5.2.13\tmp\PEAR-1.9.2\PEAR.php

                    [docblock] =&gt; /**
     * Make a string representation of this object.
     *
     * @return string a string with an object summary
     * @access public
     */
                    [keywords] =&gt;
                    [signature] =&gt; toString()
                    [ccn] =&gt; 8
                )

        )
)</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_more_informations">More Informations</h2>
<div class="sectionbody">
<div class="paragraph"><p>To get informations such as interfaces or functions, uses either corresponding container get methods
or array access interface (as seen previously with classes).</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="nv">$reflect</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PHP_Reflect</span><span class="p">();</span>
    <span class="nv">$reflect</span><span class="o">-&gt;</span><span class="na">scan</span><span class="p">(</span><span class="nv">$source</span><span class="p">);</span>

    <span class="nv">$interfaces</span> <span class="o">=</span> <span class="nv">$reflect</span><span class="o">-&gt;</span><span class="na">getInterfaces</span><span class="p">();</span>
    <span class="c1">// OR</span>
    <span class="nv">$interfaces</span> <span class="o">=</span> <span class="nv">$reflect</span><span class="p">[</span><span class="s1">&#39;interfaces&#39;</span><span class="p">];</span>

    <span class="nv">$functions</span>  <span class="o">=</span> <span class="nv">$reflect</span><span class="o">-&gt;</span><span class="na">getFunctions</span><span class="p">();</span>
    <span class="c1">// OR</span>
    <span class="nv">$functions</span>  <span class="o">=</span> <span class="nv">$reflect</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">];</span>
</pre></div></div></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Version 1.0.0<br />
Last updated 2011-06-19 20:37:26 Paris, Madrid (heure d'été)
</div>
</div>
</body>
</html>
