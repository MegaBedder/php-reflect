#!/usr/bin/env php
<?php
if (!getenv("REFLECT")) {
    $files = array(
        realpath('./reflect.json'),
        getenv('HOME').'/.config/phpreflect.json',
        '/etc/phpreflect.json',
    );
    foreach ($files as $file) {
        if (file_exists($file)) {
            putenv("REFLECT=$file");
            break;
        }
    }
}

$baseDir   = dirname(__DIR__);
$vendorDir = $baseDir . '/vendor';

if (\Phar::running()) {
    $vendorDir = 'phar://phpreflect.phar/vendor';
} else {
    $baseDir   = dirname(__DIR__);
    $vendorDir = $baseDir . '/vendor';
}
require_once $vendorDir . '/autoload.php';

if (PHP_SAPI !== 'cli') {
    return;
}

use Bartlett\Reflect\ConsoleApplication as Application;

$application = new Application();
$application->run();
